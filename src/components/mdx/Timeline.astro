---
import { cn } from '@lib/utils';
import { formatDate } from '@lib/utils';

interface TimelineEvent {
  date: Date | string;
  title: string;
  description: string;
}

interface Props {
  events: TimelineEvent[];
  orientation?: 'vertical' | 'horizontal';
  class?: string;
}

const { events, orientation = 'vertical', class: className } = Astro.props;
---

<div class={cn(
  'timeline',
  orientation === 'vertical' ? 'space-y-8' : 'flex gap-8 overflow-x-auto pb-4',
  className
)}>
  {events.map((event, index) => (
    <div class={cn(
      'timeline-item',
      orientation === 'vertical' ? 'flex gap-6' : 'flex-shrink-0 w-80'
    )}>
      {orientation === 'vertical' && (
        <div class="flex flex-col items-center">
          <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 text-white flex items-center justify-center font-bold flex-shrink-0 shadow-md">
            {index + 1}
          </div>
          {index < events.length - 1 && (
            <div class="w-0.5 flex-1 bg-primary-200 mt-4"></div>
          )}
        </div>
      )}
      <div class={cn(
        'flex-1 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-4',
        orientation === 'horizontal' && 'border-l-4 border-primary-600 pl-6'
      )}>
        <div class="text-sm font-medium text-primary-600 mb-2">
          {typeof event.date === 'string' ? event.date : formatDate(event.date)}
        </div>
        <h3 class="text-xl font-bold text-neutral-900 mb-2">
          {event.title}
        </h3>
        <p class="text-neutral-600">
          {event.description}
        </p>
      </div>
    </div>
  ))}
</div>
